<div class="curationQueue">
    <h3 class="headerStyle">Curation Queue
        <span style="font-size:14px; margin-left:20px">
            <input id="displaySwitch"
                   type="checkbox"
                   ng-model="allCuration"
                   ng-value="allCuration">
            <label for="displaySwitch">Display All Curations</label>
        </span>
    </h3>
    <form ng-submit="addCuration()">
        <div class="row">
            <div class="col-sm-5">
                <input type="text" class="form-control" ng-model="article" placeholder="PMID or Abstract" size="25">
                <span ng-bind-html="predictedArticle"></span>
            </div>
            <div class="col-sm-2"><input type="text" class="form-control" ng-model="link" placeholder="Link" size="10"></div>
            <div class="col-sm-2"><input type="text" class="form-control" ng-model="variant" placeholder="Variant" size="10"></div>
            <div class="col-sm-2">
                <select chosen
                        data-placeholder="Choose A Curator"
                        ng-model="curator"
                        ng-options="m.name for m in curators"
                        class="chosen-select">
                    <option value=""></option>
                </select>
            </div>
            <div class="col-sm-1"><button tyle="submit" class="btn btn-success" ng-disabled="!article"><i class="fa fa-plus buttonStyle"></i></button></div>
        </div>
    </form>
    <div ng-if="queue.length > 0">
        <table datatable="ng" dt-options="dtOptions" dt-columns="dtColumns" style="width:100%">
            <thead>
            <tr>
                <th>Article</th>
                <th>Variant</th>
                <th>Added by</th>
                <th>Added at</th>
                <th>Curator</th>
                <th>Curated in</th>
                <th>Operation</th>
            </tr>
            </thead>
            <tbody>
            <tr ng-repeat="x in queue" ng-show="allCuration || !x.curated">
                <td>
                    <div ng-if="x.editable">
                        <a href="{{x.link}}" target="_blank" ng-if="x.pmid">{{x.article}}</a>
                        <input type="text" class="form-control" ng-model="x.article" ng-if="!x.pmid"/>
                    </div>
                    <div ng-if="!x.editable">
                        <a href="{{x.link}}" target="_blank">{{x.article}}</a>
                    </div>
                    <pub-iframe
                            ng-model="x.pmidString"
                            ng-if="x.pmid">
                    </pub-iframe>
                </td>
                <td>
                    <input type="text" class="form-control" ng-model="x.variant" ng-if="x.editable"/>
                    <p ng-if="!x.editable">{{x.variant}}</p>
                </td>
                <td>{{x.addedBy}}</td>
                <td>{{x.addedAt | date : 'MMM d, h:mm a yyyy'}}</td>
                <td>
                    <select chosen
                            ng-model="modifiedCurator"
                            ng-options="m.name for m in curators"
                            ng-change="synchronize(modifiedCurator)"
                            ng-if="x.editable"
                            class="chosen-select">
                    </select>
                    <p ng-if="!x.editable">{{x.curator}}</p></td>
                <td>
                    {{getAnnotationLocation(x)}}
                </td>
                <td style="width: 15%" ng-show="!x.curated">
                    <button type="button" class="btn btn-success" ng-click="completeCuration($index)" ng-show="!x.editable" uib-tooltip-placement="top" uib-tooltip="Complete curation"><i class="fa fa-check"></i></button>
                    <button type="button" class="btn btn-warning" ng-click="editCuration($index)" ng-show="!x.editable" uib-tooltip-placement="top" uib-tooltip="Modify curation"><i class="fa fa-edit"></i></button>
                    <button type="button" class="btn btn-warning" ng-click="updateCuration($index, x)" ng-show="x.editable" uib-tooltip-placement="top" uib-tooltip="Save curation modification"><i class="fa fa-check"></i></button>
                    <button type="button" class="btn btn-danger" ng-click="deleteCuration($index)" ng-show="userRole === 8 && !x.editable" uib-tooltip-placement="top" uib-tooltip="Delete curation"><i class="fa fa-trash-o"></i></button>
                </td>
            </tr>
            </tbody>
        </table>
        <div class="row"  ng-show="userRole === 8" >
            <br/><br/>
            <div class="col-sm-2"><h5>Notify Curators: </h5></div>
            <div class="col-sm-6" style="width:400px">
                <select chosen multiple
                        ng-model="curatorsToNotify"
                        ng-options="m.name for m in curators"
                        ng-change="markEmailSent()"
                        class="chosen-select">
                </select>
            </div>
            <div class="col-sm-3">
                <button tyle="button" class="btn btn-success" ng-disabled="!curatorsToNotify || curatorsToNotify.length === 0 || emailSent" ng-click="sendEmail(curatorsToNotify)">Notify</button>
            </div>
        </div>
    </div>

</div>